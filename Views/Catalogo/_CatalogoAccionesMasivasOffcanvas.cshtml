@* Offcanvas para aplicar cambios masivos de precios en el catálogo *@
<div class="offcanvas offcanvas-end bg-dark text-light" tabindex="-1" id="accMasivasOffcanvas" aria-labelledby="accMasivasLabel">
    <div class="offcanvas-header border-bottom border-secondary">
        <h5 class="offcanvas-title fw-bold" id="accMasivasLabel">
            <i class="bi bi-sliders text-warning"></i> Acciones Masivas de Precios
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <div class="alert alert-info small">
            <i class="bi bi-info-circle me-2"></i>
            Seleccioná productos de la tabla y aplicá cambios de precios masivos.
        </div>

        <!-- Panel de selección -->
        <div class="card bg-secondary border-0 mb-3">
            <div class="card-body">
                <p class="small text-light mb-2">
                    <i class="bi bi-check2-square me-1"></i>Productos seleccionados
                </p>
                <h4 class="text-warning mb-0" id="countSeleccionados">0</h4>
            </div>
        </div>

        <!-- Tipo de cambio -->
        <div class="mb-3">
            <label class="form-label fw-semibold">Tipo de cambio</label>
            <select class="form-select" id="tipoCambio">
                <option value="">Seleccioná una opción...</option>
                <option value="porcentaje">Porcentaje (%)</option>
                <option value="monto">Monto fijo ($)</option>
            </select>
        </div>

        <!-- Panel de porcentaje -->
        <div id="panelPorcentaje" class="d-none mb-3">
            <label class="form-label fw-semibold">Aumento/Descuento (%)</label>
            <div class="input-group">
                <input type="number" class="form-control" id="valorPorcentaje" step="0.01" placeholder="Ej: 10 para +10%">
                <span class="input-group-text">%</span>
            </div>
            <small class="text-secondary d-block mt-1">
                Usá valores positivos para aumentar o negativos para descontar.
            </small>
        </div>

        <!-- Panel de monto fijo -->
        <div id="panelMonto" class="d-none mb-3">
            <label class="form-label fw-semibold">Aumento/Descuento ($)</label>
            <div class="input-group">
                <span class="input-group-text">$</span>
                <input type="number" class="form-control" id="valorMonto" step="0.01" placeholder="Ej: 100">
            </div>
            <small class="text-secondary d-block mt-1">
                Usá valores positivos para aumentar o negativos para descontar.
            </small>
        </div>

        <!-- Aplicar a lista de precios -->
        <div class="mb-3">
            <label class="form-label fw-semibold">Aplicar a lista de precios</label>
            <select class="form-select" id="listaPrecios">
                <option value="">Precio base</option>
                <!-- Se llena por JS -->
            </select>
        </div>

        <!-- Botón de previsualización -->
        <div class="d-grid">
            <button type="button" class="btn btn-primary" id="btnPrevisualizar" disabled>
                <i class="bi bi-eye me-2"></i>Previsualizar cambios
            </button>
        </div>

        <!-- Resumen de previsualización -->
        <div id="resumenPrevio" class="d-none mt-3">
            <div class="card bg-dark border-warning">
                <div class="card-header bg-warning text-dark fw-semibold">
                    <i class="bi bi-info-circle me-1"></i>Vista previa
                </div>
                <div class="card-body">
                    <ul class="list-unstyled mb-0 small" id="listaPrevio"></ul>
                </div>
                <div class="card-footer d-grid gap-2">
                    <button type="button" class="btn btn-success" id="btnConfirmarCambios">
                        <i class="bi bi-check-circle me-2"></i>Confirmar y aplicar
                    </button>
                    <button type="button" class="btn btn-outline-secondary" id="btnCancelarPrevio">
                        Cancelar
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
