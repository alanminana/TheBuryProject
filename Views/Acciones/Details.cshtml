@model AccionDetalleViewModel

@{
    ViewData["Title"] = "Detalles de la Acción";
    var returnUrl = ViewData["ReturnUrl"] as string;
    var backUrl = returnUrl ?? Url.Action("Index", "Acciones")!;
    var pageReturnUrl = Context.Request.Path + Context.Request.QueryString;
}

<section class="container-fluid px-0 py-3 text-light">

    <!-- Header de página -->
    <div class="d-flex align-items-center justify-content-between mb-4">
        <div>
            <div class="text-muted text-uppercase small mb-1">Acciones</div>
            <h1 class="h4 mb-0 d-flex align-items-center gap-2">
                <i class="bi bi-lightning" aria-hidden="true"></i>
                <span>Detalles de la acción</span>
            </h1>
        </div>

        <div class="d-flex gap-2">
            <a asp-action="Edit" asp-route-id="@Model.Id" asp-route-returnUrl="@pageReturnUrl" class="btn btn-primary btn-sm">
                <i class="bi bi-pencil me-1" aria-hidden="true"></i>Editar
            </a>
            <a href="@backUrl" class="btn btn-outline-secondary btn-sm">
                <i class="bi bi-arrow-left me-1" aria-hidden="true"></i>Volver
            </a>
        </div>
    </div>

    <!-- Contenido -->
    <div class="row">
        <div class="col-12 col-lg-8 col-xl-6">

            <div class="card card-animate">
                <div class="card-body">

                    <!-- Encabezado de la acción -->
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <div class="text-muted small mb-1">Acción</div>
                            <h2 class="h5 mb-0 d-flex align-items-center gap-2">
                                <span>@Model.Nombre</span>
                                @if (Model.Activo)
                                {
                                    <span class="badge bg-success">Activo</span>
                                }
                                else
                                {
                                    <span class="badge bg-secondary">Inactivo</span>
                                }
                            </h2>
                        </div>
                    </div>

                    <!-- Detalles -->
                    <dl class="row mb-0">
                        <dt class="col-sm-4 text-muted">Módulo</dt>
                        <dd class="col-sm-8">
                            <span class="badge bg-info text-dark">@Model.ModuloNombre</span>
                            <div class="small text-muted mt-1">
                                Clave módulo: <code>@Model.ModuloClave</code>
                            </div>
                        </dd>

                        <dt class="col-sm-4 text-muted">Nombre</dt>
                        <dd class="col-sm-8">
                            <strong>@Model.Nombre</strong>
                        </dd>

                        <dt class="col-sm-4 text-muted">Clave</dt>
                        <dd class="col-sm-8">
                            <code>@Model.Clave</code>
                        </dd>

                        <dt class="col-sm-4 text-muted">Claim generado</dt>
                        <dd class="col-sm-8">
                            <code>@Model.ModuloClave.@Model.Clave</code>
                            <div class="small text-muted mt-1">
                                Este es el permiso que se asigna a los roles.
                            </div>
                        </dd>

                        @if (!string.IsNullOrWhiteSpace(Model.Descripcion))
                        {
                            <dt class="col-sm-4 text-muted">Descripción</dt>
                            <dd class="col-sm-8">
                                @Model.Descripcion
                            </dd>
                        }

                        <dt class="col-sm-4 text-muted">Estado</dt>
                        <dd class="col-sm-8">
                            @if (Model.Activo)
                            {
                                <span class="badge bg-success">Activo</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">Inactivo</span>
                            }
                        </dd>

                        <dt class="col-sm-4 text-muted">Creado</dt>
                        <dd class="col-sm-8">
                            <time datetime="@Model.CreatedAt.ToString("O")">
                                @Model.CreatedAt.ToString("dd/MM/yyyy HH:mm")
                            </time>
                        </dd>
                    </dl>

                    <!-- Nota -->
                    <div class="alert alert-info mt-4 mb-0 d-flex align-items-start gap-2">
                        <i class="bi bi-info-circle mt-1" aria-hidden="true"></i>
                        <div>
                            <strong>Nota.</strong>
                            <div class="small">
                                Esta acción se puede asignar a roles desde la interfaz de
                                <a asp-controller="Roles" asp-action="Index" asp-route-returnUrl="@pageReturnUrl" class="alert-link">Gestión de Roles</a>.
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</section>
